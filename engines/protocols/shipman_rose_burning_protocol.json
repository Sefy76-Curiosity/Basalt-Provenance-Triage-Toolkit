{
  "protocol_name": "Shipman & Rose Burning Protocol",
  "version": "2.0",
  "author": "Sefy Levy",
  "description": "Standards-accurate JSON implementation of the Shipman & Rose (1983) bone burning stages, including full Stage 0â€“5 classification and corrected severity grouping.",
  "icon": "ðŸ”¥",

  "requires_fields": [
    "Sample_ID",
    "Burning"
  ],

  "stages": [

    {
      "id": "missing_data",
      "name": "Missing Data Screening",
      "type": "rule_stage",
      "rules_logic": "OR",
      "rules": [
        {
          "label": "MISSING_BURNING",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "is_null" }
          ],
          "outputs": {
            "QC_Class": "INSUFFICIENT_DATA",
            "Flag_For_Review": "YES",
            "Review_Reason": "Missing burning score"
          }
        }
      ]
    },

    {
      "id": "burning_stage",
      "name": "Assign Burning Stage (Shipman & Rose 1983)",
      "type": "rule_stage",
      "rules_logic": "OR",

      "rules": [

        {
          "label": "STAGE_0_UNBURNED",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "==", "value": 0 }
          ],
          "outputs": { "Burning_Class": "Stage 0 â€” Unburned" }
        },

        {
          "label": "STAGE_1_BROWN",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "==", "value": 1 }
          ],
          "outputs": { "Burning_Class": "Stage 1 â€” Brown / Lightly Charred" }
        },

        {
          "label": "STAGE_2_BLACK",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "==", "value": 2 }
          ],
          "outputs": { "Burning_Class": "Stage 2 â€” Black / Charred" }
        },

        {
          "label": "STAGE_3_GREY",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "==", "value": 3 }
          ],
          "outputs": { "Burning_Class": "Stage 3 â€” Grey / Calcined" }
        },

        {
          "label": "STAGE_4_WHITE",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "==", "value": 4 }
          ],
          "outputs": { "Burning_Class": "Stage 4 â€” White / Calcined" }
        },

        {
          "label": "STAGE_5_BLUE_WHITE",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "==", "value": 5 }
          ],
          "outputs": { "Burning_Class": "Stage 5 â€” Blueâ€‘White / Fully Calcined" }
        }
      ]
    },

    {
      "id": "severity_grouping",
      "name": "Burning Severity Grouping (Corrected)",
      "type": "rule_stage",
      "rules_logic": "OR",

      "rules": [

        {
          "label": "LOW_SEVERITY",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "<=", "value": 1 }
          ],
          "outputs": { "Burning_Severity": "LOW" }
        },

        {
          "label": "MEDIUM_SEVERITY",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": "between", "value": [2, 3] }
          ],
          "outputs": { "Burning_Severity": "MEDIUM" }
        },

        {
          "label": "HIGH_SEVERITY",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning", "operator": ">=", "value": 4 }
          ],
          "outputs": { "Burning_Severity": "HIGH" }
        }
      ]
    },

    {
      "id": "review_stage",
      "name": "Review Flags",
      "type": "rule_stage",
      "rules_logic": "OR",
      "rules": [
        {
          "label": "UNCLASSIFIED",
          "conditions_logic": "AND",
          "conditions": [
            { "field": "Burning_Class", "operator": "is_null" }
          ],
          "outputs": {
            "Flag_For_Review": "YES",
            "Review_Reason": "Burning stage not assigned"
          }
        }
      ]
    }
  ],

  "final_outputs": {
    "primary_classification_field": "Burning_Class",
    "qc_field": "QC_Class",
    "flag_field": "Flag_For_Review"
  }
}
